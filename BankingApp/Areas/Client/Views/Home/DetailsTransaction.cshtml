@model DataTransactionHomeClientListViewModel

@{
    ViewData["Title"] = "Historial de Transacciones";
    Layout = "_LayoutClient";
}

<link rel="stylesheet" href="~/css/DetailsTransactionStyle.css" />

<div class="container mt-4">

    <h2 class="page-title text-center mb-4">
        <i class="bi bi-receipt-cutoff me-2"></i>
        Historial de Transacciones
    </h2>

    @if (Model.DataTransactionHomeClient == null || !Model.DataTransactionHomeClient.Any())
    {
        <div class="empty-state text-center mt-5">
            <i class="bi bi-journal-x display-1 text-muted"></i>

            <h4 class="mt-3 fw-bold text-muted">Aún no tienes transacciones</h4>
            <p class="text-secondary">Cuando realices movimientos aparecerán aquí.</p>
        </div>

        <div class="text-center mt-4">
            <a asp-area="Client" asp-controller="Home" asp-action="Index" class="btn-back btn btn-outline-warning">
                <i class="bi bi-arrow-left"></i> Volver al inicio
            </a>
        </div>
    }
    else
    {
        <div class="transaction-list">

            @foreach (var item in Model.DataTransactionHomeClient)
            {
                <div class="transaction-card-clean shadow-sm">

                    <!-- HEADER -->
                    <div class="header">
                        <span class="icon"><i class="bi bi-arrow-left-right"></i></span>
                        Transacción
                    </div>

                    <!-- BODY -->
                    <div class="body">

                        <div><strong>Fecha:</strong> @item.Fecha.ToString("dd/MM/yyyy hh:mm tt")</div>

                        <div>
                            <strong>Monto:</strong>
                            <span class="amount @(item.Monto >= 0 ? "text-success" : "text-danger")">
                                @((item.Monto > 0 ? item.Monto : 0) + " RD$")
                            </span>
                        </div>

                        <div>
                            <strong>Tipo:</strong>
                            @(item.Type == TransactionType.DEBIT ? "DÉBITO" : "CRÉDITO")
                        </div>

                        <div>
                            <strong>Beneficiario:</strong>
                            @(
                                                item.Description == DescriptionTransaction.Transaccion_Express ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.Transaccion_A_Beneficiario ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.Trasaccion_A_Tarjeta ? item.Beneficiary![^4..] :
                                                item.Description == DescriptionTransaction.Transaccion_A_Prestamo ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.Cash_Advance ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.DEPOSIT ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.WITHDRAWAL ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.CREDITCARDPAYMENT ? item.Beneficiary![^4..] :
                                                item.Description == DescriptionTransaction.LOANPAYMENT ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.TRANSFER ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.DISBURSEMENT ? "Tú, préstamo" :
                                                "No tuvo beneficiario"
                                                )
                        </div>

                        <div>
                            <strong>Origen:</strong>
                            @(
                                                item.Description == DescriptionTransaction.Transaccion_Express ? item.Origin :
                                                item.Description == DescriptionTransaction.Transaccion_A_Beneficiario ? item.Origin :
                                                item.Description == DescriptionTransaction.WITHDRAWAL ? item.Origin :
                                                item.Description == DescriptionTransaction.Cash_Advance ? item.Origin![^4..] :
                                                item.Description == DescriptionTransaction.DEPOSIT ? item.Origin :
                                                item.Description == DescriptionTransaction.Transaccion_A_Prestamo ? item.Origin :
                                                item.Description == DescriptionTransaction.Trasaccion_A_Tarjeta ? item.Origin :
                                                item.Description == DescriptionTransaction.DISBURSEMENT ? item.Beneficiary :
                                                item.Description == DescriptionTransaction.CREDITCARDPAYMENT ? item.Origin :
                                                item.Description == DescriptionTransaction.LOANPAYMENT ? item.Origin :
                                                item.Description == DescriptionTransaction.TRANSFER ? item.Origin :
                                                "No tiene origen"
                                                )
                    </div>

                    </div>

                    <!-- FOOTER -->
                    <div class="footer">
                        <span class="badge status-badge @(item.Status == OperationStatus.APPROVED ? "bg-success" : "bg-danger")">
                            @(item.Status == OperationStatus.APPROVED ? "APROBADA" : "RECHAZADA")
                        </span>
                    </div>

                </div>
                }
        </div>

        <div class="text-center mt-4">
            <a asp-area="Client" asp-controller="Home" asp-action="Index" class="btn-back btn btn-outline-warning">
                <i class="bi bi-arrow-left"></i> Volver
            </a>
        </div>
    }
</div>


